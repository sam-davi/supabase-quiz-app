{
  "id": "e0f9311f-a3d8-49ae-9991-a0ea86a1e439",
  "prevId": "12803eb7-860b-47f9-93e4-6111de9cb154",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.categories": {
      "name": "categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "team": {
          "name": "team",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "min_percent_score": {
          "name": "min_percent_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "max_percent_score": {
          "name": "max_percent_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "average_percent_score": {
          "name": "average_percent_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "categories_name_idx": {
          "name": "categories_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "categories_team_slug": {
          "name": "categories_team_slug",
          "columns": [
            {
              "expression": "team",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "categories_team_teams_slug_fk": {
          "name": "categories_team_teams_slug_fk",
          "tableFrom": "categories",
          "columnsFrom": [
            "team"
          ],
          "tableTo": "teams",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "team member can create category": {
          "name": "team member can create category",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "private.is_team_member(\"categories\".\"team\")"
        },
        "team member can select category": {
          "name": "team member can select category",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"categories\".\"team\")"
        },
        "team member can update category": {
          "name": "team member can update category",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"categories\".\"team\")",
          "withCheck": "private.is_team_member(\"categories\".\"team\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.locations": {
      "name": "locations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "team": {
          "name": "team",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "locations_name_idx": {
          "name": "locations_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "locations_team_slug": {
          "name": "locations_team_slug",
          "columns": [
            {
              "expression": "team",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "locations_team_teams_slug_fk": {
          "name": "locations_team_teams_slug_fk",
          "tableFrom": "locations",
          "columnsFrom": [
            "team"
          ],
          "tableTo": "teams",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.members": {
      "name": "members",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "team": {
          "name": "team",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "member": {
          "name": "member",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "members_member_idx": {
          "name": "members_member_idx",
          "columns": [
            {
              "expression": "member",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "members_team_member_idx": {
          "name": "members_team_member_idx",
          "columns": [
            {
              "expression": "team",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "member",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "members_team_teams_slug_fk": {
          "name": "members_team_teams_slug_fk",
          "tableFrom": "members",
          "columnsFrom": [
            "team"
          ],
          "tableTo": "teams",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "members_member_profiles_slug_fk": {
          "name": "members_member_profiles_slug_fk",
          "tableFrom": "members",
          "columnsFrom": [
            "member"
          ],
          "tableTo": "profiles",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "team host can create member": {
          "name": "team host can create member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "private.is_team_host(\"members\".\"team\")"
        },
        "team member can select member": {
          "name": "team member can select member",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"members\".\"team\")"
        },
        "team host can update member": {
          "name": "team host can update member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_host(\"members\".\"team\")",
          "withCheck": "private.is_team_host(\"members\".\"team\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true,
          "default": "auth.uid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "profiles_name_idx": {
          "name": "profiles_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "profiles_slug_idx": {
          "name": "profiles_slug_idx",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "profiles_user_id_users_id_fk": {
          "name": "profiles_user_id_users_id_fk",
          "tableFrom": "profiles",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "profiles_user_id_unique": {
          "name": "profiles_user_id_unique",
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {
        "authenticated user can create profile": {
          "name": "authenticated user can create profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "auth.uid() = \"profiles\".\"user_id\""
        },
        "authenticated user can select profile": {
          "name": "authenticated user can select profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "auth.uid() = \"profiles\".\"user_id\""
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rounds": {
      "name": "rounds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "quiz_date": {
          "name": "quiz_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "team": {
          "name": "team",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "round_number": {
          "name": "round_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "out_of": {
          "name": "out_of",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "double": {
          "name": "double",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "percent_score": {
          "name": "percent_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "type": "stored",
            "as": "\"rounds\".\"score\" / \"rounds\".\"out_of\" * 100"
          }
        },
        "total_score": {
          "name": "total_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "type": "stored",
            "as": "case when \"rounds\".\"double\" then \"rounds\".\"score\" * 2 else \"rounds\".\"score\" end"
          }
        },
        "total_out_of": {
          "name": "total_out_of",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "type": "stored",
            "as": "case when \"rounds\".\"double\" then \"rounds\".\"out_of\" * 2 else \"rounds\".\"out_of\" end"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "rounds_team_date_location_round_number_idx": {
          "name": "rounds_team_date_location_round_number_idx",
          "columns": [
            {
              "expression": "team",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "quiz_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "round_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "rounds_team_teams_slug_fk": {
          "name": "rounds_team_teams_slug_fk",
          "tableFrom": "rounds",
          "columnsFrom": [
            "team"
          ],
          "tableTo": "teams",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "rounds_location_team_locations_slug_team_fk": {
          "name": "rounds_location_team_locations_slug_team_fk",
          "tableFrom": "rounds",
          "columnsFrom": [
            "location",
            "team"
          ],
          "tableTo": "locations",
          "columnsTo": [
            "slug",
            "team"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "rounds_category_team_categories_slug_team_fk": {
          "name": "rounds_category_team_categories_slug_team_fk",
          "tableFrom": "rounds",
          "columnsFrom": [
            "category",
            "team"
          ],
          "tableTo": "categories",
          "columnsTo": [
            "slug",
            "team"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "team member can create round": {
          "name": "team member can create round",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "private.is_team_member(\"rounds\".\"team\")"
        },
        "team member can select round": {
          "name": "team member can select round",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"rounds\".\"team\")"
        },
        "team member can update round": {
          "name": "team member can update round",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"rounds\".\"team\")",
          "withCheck": "private.is_team_member(\"rounds\".\"team\")"
        }
      },
      "checkConstraints": {
        "rounds_out_of_greater_than_zero": {
          "name": "rounds_out_of_greater_than_zero",
          "value": "\"rounds\".\"out_of\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.scores": {
      "name": "scores",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "quiz_date": {
          "name": "quiz_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "team": {
          "name": "team",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "out_of": {
          "name": "out_of",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "percent_score": {
          "name": "percent_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "type": "stored",
            "as": "\"scores\".\"score\" / \"scores\".\"out_of\" * 100"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "scores_team_date_location_idx": {
          "name": "scores_team_date_location_idx",
          "columns": [
            {
              "expression": "team",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "quiz_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "scores_team_teams_slug_fk": {
          "name": "scores_team_teams_slug_fk",
          "tableFrom": "scores",
          "columnsFrom": [
            "team"
          ],
          "tableTo": "teams",
          "columnsTo": [
            "slug"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "scores_location_team_locations_slug_team_fk": {
          "name": "scores_location_team_locations_slug_team_fk",
          "tableFrom": "scores",
          "columnsFrom": [
            "location",
            "team"
          ],
          "tableTo": "locations",
          "columnsTo": [
            "slug",
            "team"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "team member can create score": {
          "name": "team member can create score",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "private.is_team_member(\"scores\".\"team\")"
        },
        "team member can select score": {
          "name": "team member can select score",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"scores\".\"team\")"
        },
        "team member can update score": {
          "name": "team member can update score",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"scores\".\"team\")",
          "withCheck": "private.is_team_member(\"scores\".\"team\")"
        }
      },
      "checkConstraints": {
        "scores_out_of_greater_than_zero": {
          "name": "scores_out_of_greater_than_zero",
          "value": "\"scores\".\"out_of\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.teams": {
      "name": "teams",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true,
          "default": "auth.uid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "teams_name_idx": {
          "name": "teams_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "teams_slug_idx": {
          "name": "teams_slug_idx",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "teams_created_by_users_id_fk": {
          "name": "teams_created_by_users_id_fk",
          "tableFrom": "teams",
          "columnsFrom": [
            "created_by"
          ],
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "authenticated user can create team": {
          "name": "authenticated user can create team",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "auth.uid() = \"teams\".\"created_by\""
        },
        "team members can select team": {
          "name": "team members can select team",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "private.is_team_member(\"teams\".\"slug\")"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "views": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}